{% extends "layout.html" %}
{% block title %}{{ _('Attendance | PDFs') }}{% endblock %}
{% block content %}
<h2><i class="bi bi-qr-code"></i> {{ _('QR Code Generation') }}</h2>
<p>{{ _('On this page, you can generate and download for printing, the sheets with the QR Code images that the member
    can scan to register their attendance at the classes.') }}</p>

<div class="col">
    <h3>{{ _('Files Availables:') }}</h3>
    <div class="list-group list-group-numbered mt-3 mb-4">
        {% for filename in pdf_files %}
        <a class="list-group-item list-group-item-action" href="/download_pdf/{{ filename }}">{{ filename }}</a>
        {% endfor %}
    </div>

    <!-- BotÃ³n para generar PDFs -->

    {% if session['role'] == 'Owner' or session['role'] == 'Admin' %}
    <div class="row">
        <div class="col-sm-12 col-lg-4 mb-2">
            <form class="d-grid gap-2" action="/generate_week_pdfs" method="POST">
                <button class="btn btn-success btn-block" data-toggle="tooltip"
                    title="{{ _('Create PDF for each class in the current week') }}" type="submit" {% if not has_main_classes %}
                    disabled {% endif %}>
                    <i class="bi bi-calendar2-week"></i> {{ _('Generate PDFs for Week') }}
                </button>
            </form>
        </div>

        <div class="col-sm-12 col-lg-4 mb-2">
            <form class="d-grid gap-2" action="/generate_all_pdfs" method="POST">
                <button class="btn btn-primary btn-block" data-toggle="tooltip" title="{{ _('Create PDF for all classes') }}"
                    type="submit" {% if not has_classes %} disabled {% endif %}>
                    <i class="bi bi-collection"></i> {{ _('Generate all PDFs') }}
                </button>
            </form>
        </div>
        <div class="col-sm-12 col-lg-4 mb-2">
            <form class="d-grid gap-2" id="extra-class-form" action="/generate_extra_pdfs" method="POST">
                <input type="hidden" name="date" id="extra-class-date"> <!-- Campo oculto para la fecha -->
                <button class="btn btn-secondary btn-block" id="generate-extra-pdfs-btn" data-toggle="tooltip"
                    title="{{ _('Create PDF for all Extra classes') }}" type="button" {% if not has_extra_classes %} disabled
                    {% endif %}>
                    <i class="bi bi-file-earmark"></i> {{ _('Generate Extra class PDFs') }}
                </button>
            </form>

        </div>
    </div>
    {% endif %}

</div>

{% endblock %}